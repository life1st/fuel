import{r as t,R as e,k as n,a as r,h as i,j as a}from"./index-u5DnuwxY.js";import{i as o,m as s,j as l,a as c,d as u,G as d,c as f,C as h,t as p,b as v,g as m,e as g,f as y,h as x,k as w,F as b,l as C,A as j,T as k,L as E}from"./index-D3j6A6ZS.js";import{c as M,f as N,w as S,z as P,h as R,d as O}from"./spin-loading-DwfaOn8j.js";import{n as L,r as A,i as F,h as _,j as D,l as I,k as Y,d as z,e as q,m as V,f as X,g as T}from"./createSuper-QmGDK8HA.js";import{_ as B,T as W}from"./index-YkkJrYC_.js";function $(e){return t.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 49 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{style:Object.assign({verticalAlign:"-0.125em"},e.style),className:["antd-mobile-icon",e.className].filter(Boolean).join(" ")}),t.createElement("g",{id:"InformationCircleOutline-InformationCircleOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},t.createElement("g",{transform:"translate(1.000000, 0.000000)",id:"InformationCircleOutline-编组"},t.createElement("rect",{id:"InformationCircleOutline-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),t.createElement("path",{d:"M24,2 C36.1502645,2 46,11.8497355 46,24 C46,36.1502645 36.1502645,46 24,46 C11.8497355,46 2,36.1502645 2,24 C2,11.8497355 11.8497355,2 24,2 Z M24,5 C13.5065898,5 5,13.5065898 5,24 C5,34.4934102 13.5065898,43 24,43 C34.4934102,43 43,34.4934102 43,24 C43,13.5065898 34.4934102,5 24,5 Z M25.6,20 C25.8209139,20 26,20.1790861 26,20.4 L26,34.6 C26,34.8209139 25.8209139,35 25.6,35 L23.4,35 C23.1790861,35 23,34.8209139 23,34.6 L23,23 L21.4,23 C21.1790861,23 21,22.8209139 21,22.6 L21,20.4 C21,20.1790861 21.1790861,20 21.4,20 L25.6,20 Z M25.6,14 C25.8209139,14 26,14.1790861 26,14.4 L26,16.6 C26,16.8209139 25.8209139,17 25.6,17 L23.4,17 C23.1790861,17 23,16.8209139 23,16.6 L23,14.4 C23,14.1790861 23.1790861,14 23.4,14 L25.6,14 Z",id:"InformationCircleOutline-形状结合",fill:"currentColor",fillRule:"nonzero"}))))}function U(e){var n=t.useRef();n.current=e;var r=t.useCallback(function(){for(var t,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return null===(t=n.current)||void 0===t?void 0:t.call.apply(t,[n].concat(r))},[]);return r}function K(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}var Z=K()?t.useLayoutEffect:t.useEffect,H=function(e,n){var r=t.useRef(!0);Z(function(){return e(r.current)},n),Z(function(){return r.current=!1,function(){r.current=!0}},[])},G=function(t,e){H(function(e){if(!e)return t()},e)};function Q(e){var n=t.useRef(!1),r=t.useState(e),i=L(r,2),a=i[0],o=i[1];return t.useEffect(function(){return n.current=!1,function(){n.current=!0}},[]),[a,function(t,e){e&&n.current||o(t)}]}function J(t){return void 0!==t}var tt=Number(t.version.split(".")[0]),et=function(t,e){"function"==typeof t?t(e):"object"===B(t)&&t&&"current"in t&&(t.current=e)},nt=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.filter(Boolean);return r.length<=1?r[0]:function(t){e.forEach(function(e){et(e,t)})}};function rt(e){return t.isValidElement(e)&&!F(e)}function it(t){return t instanceof HTMLElement||t instanceof SVGElement}function at(t){var r,i=function(t){return t&&"object"===B(t)&&it(t.nativeElement)?t.nativeElement:it(t)?t:null}(t);return i||(t instanceof e.Component?null===(r=n.findDOMNode)||void 0===r?void 0:r.call(n,t):null)}var ot=t.createContext({}),st=function(t){_(n,t);var e=D(n);function n(){return I(this,n),e.apply(this,arguments)}return Y(n,[{key:"render",value:function(){return this.props.children}}]),n}(t.Component);var lt="none",ct="appear",ut="enter",dt="leave",ft="none",ht="prepare",pt="start",vt="active",mt="end",gt="prepared";function yt(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit".concat(t)]="webkit".concat(e),n["Moz".concat(t)]="moz".concat(e),n["ms".concat(t)]="MS".concat(e),n["O".concat(t)]="o".concat(e.toLowerCase()),n}var xt,wt,bt,Ct=(xt=K(),wt="undefined"!=typeof window?window:{},bt={animationend:yt("Animation","AnimationEnd"),transitionend:yt("Transition","TransitionEnd")},xt&&("AnimationEvent"in wt||delete bt.animationend.animation,"TransitionEvent"in wt||delete bt.transitionend.transition),bt),jt={};if(K()){var kt=document.createElement("div");jt=kt.style}var Et={};function Mt(t){if(Et[t])return Et[t];var e=Ct[t];if(e)for(var n=Object.keys(e),r=n.length,i=0;i<r;i+=1){var a=n[i];if(Object.prototype.hasOwnProperty.call(e,a)&&a in jt)return Et[t]=e[a],Et[t]}return""}var Nt=Mt("animationend"),St=Mt("transitionend"),Pt=!(!Nt||!St),Rt=Nt||"animationend",Ot=St||"transitionend";function Lt(t,e){return t?"object"===B(t)?t[e.replace(/-\w/g,function(t){return t[1].toUpperCase()})]:"".concat(t,"-").concat(e):null}var At=K()?t.useLayoutEffect:t.useEffect,Ft=function(t){return+setTimeout(t,16)},_t=function(t){return clearTimeout(t)};"undefined"!=typeof window&&"requestAnimationFrame"in window&&(Ft=function(t){return window.requestAnimationFrame(t)},_t=function(t){return window.cancelAnimationFrame(t)});var Dt=0,It=new Map;function Yt(t){It.delete(t)}var zt=function(t){var e=Dt+=1;return function n(r){if(0===r)Yt(e),t();else{var i=Ft(function(){n(r-1)});It.set(e,i)}}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),e};zt.cancel=function(t){var e=It.get(t);return Yt(t),_t(e)};var qt=[ht,pt,vt,mt],Vt=[ht,gt],Xt=!1;function Tt(t){return t===vt||t===mt}const Bt=function(e,n,r){var i=Q(ft),a=L(i,2),o=a[0],s=a[1],l=function(){var e=t.useRef(null);function n(){zt.cancel(e.current)}return t.useEffect(function(){return function(){n()}},[]),[function t(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;n();var a=zt(function(){i<=1?r({isCanceled:function(){return a!==e.current}}):t(r,i-1)});e.current=a},n]}(),c=L(l,2),u=c[0],d=c[1];var f=n?Vt:qt;return At(function(){if(o!==ft&&o!==mt){var t=f.indexOf(o),e=f[t+1],n=r(o);n===Xt?s(e,!0):e&&u(function(t){function r(){t.isCanceled()||s(e,!0)}!0===n?r():Promise.resolve(n).then(r)})}},[e,o]),t.useEffect(function(){return function(){d()}},[]),[function(){s(ht,!0)},o]};function Wt(e,n,r,i){var a,o,s,l,c=i.motionEnter,u=void 0===c||c,d=i.motionAppear,f=void 0===d||d,h=i.motionLeave,p=void 0===h||h,v=i.motionDeadline,m=i.motionLeaveImmediately,g=i.onAppearPrepare,y=i.onEnterPrepare,x=i.onLeavePrepare,w=i.onAppearStart,b=i.onEnterStart,C=i.onLeaveStart,j=i.onAppearActive,k=i.onEnterActive,E=i.onLeaveActive,M=i.onAppearEnd,N=i.onEnterEnd,S=i.onLeaveEnd,P=i.onVisibleChanged,R=Q(),O=L(R,2),A=O[0],F=O[1],_=(a=lt,o=t.useReducer(function(t){return t+1},0),s=L(o,2)[1],l=t.useRef(a),[U(function(){return l.current}),U(function(t){l.current="function"==typeof t?t(l.current):t,s()})]),D=L(_,2),I=D[0],Y=D[1],V=Q(null),X=L(V,2),T=X[0],B=X[1],W=I(),$=t.useRef(!1),K=t.useRef(null);function Z(){return r()}var H=t.useRef(!1);function G(){Y(lt),B(null,!0)}var J=U(function(t){var e=I();if(e!==lt){var n=Z();if(!t||t.deadline||t.target===n){var r,i=H.current;e===ct&&i?r=null==M?void 0:M(n,t):e===ut&&i?r=null==N?void 0:N(n,t):e===dt&&i&&(r=null==S?void 0:S(n,t)),i&&!1!==r&&G()}}}),tt=function(e){var n=t.useRef();function r(t){t&&(t.removeEventListener(Ot,e),t.removeEventListener(Rt,e))}return t.useEffect(function(){return function(){r(n.current)}},[]),[function(t){n.current&&n.current!==t&&r(n.current),t&&t!==n.current&&(t.addEventListener(Ot,e),t.addEventListener(Rt,e),n.current=t)},r]}(J),et=L(tt,1)[0],nt=function(t){switch(t){case ct:return q(q(q({},ht,g),pt,w),vt,j);case ut:return q(q(q({},ht,y),pt,b),vt,k);case dt:return q(q(q({},ht,x),pt,C),vt,E);default:return{}}},rt=t.useMemo(function(){return nt(W)},[W]),it=Bt(W,!e,function(t){if(t===ht){var e=rt[ht];return e?e(Z()):Xt}var n;st in rt&&B((null===(n=rt[st])||void 0===n?void 0:n.call(rt,Z(),null))||null);return st===vt&&W!==lt&&(et(Z()),v>0&&(clearTimeout(K.current),K.current=setTimeout(function(){J({deadline:!0})},v))),st===gt&&G(),true}),at=L(it,2),ot=at[0],st=at[1],ft=Tt(st);H.current=ft;var mt=t.useRef(null);At(function(){if(!$.current||mt.current!==n){F(n);var t,r=$.current;$.current=!0,!r&&n&&f&&(t=ct),r&&n&&u&&(t=ut),(r&&!n&&p||!r&&m&&!n&&p)&&(t=dt);var i=nt(t);t&&(e||i[ht])?(Y(t),ot()):Y(lt),mt.current=n}},[n]),t.useEffect(function(){(W===ct&&!f||W===ut&&!u||W===dt&&!p)&&Y(lt)},[f,u,p]),t.useEffect(function(){return function(){$.current=!1,clearTimeout(K.current)}},[]);var yt=t.useRef(!1);t.useEffect(function(){A&&(yt.current=!0),void 0!==A&&W===lt&&((yt.current||A)&&(null==P||P(A)),yt.current=!0)},[A,W]);var xt=T;return rt[ht]&&st===pt&&(xt=z({transition:"none"},xt)),[W,st,xt,null!=A?A:n]}const $t=function(e){var n=e;"object"===B(e)&&(n=e.transitionSupport);var r=t.forwardRef(function(e,r){var i=e.visible,a=void 0===i||i,o=e.removeOnLeave,s=void 0===o||o,l=e.forceRender,c=e.children,u=e.motionName,d=e.leavedClassName,f=e.eventProps,h=function(t,e){return!(!t.motionName||!n||!1===e)}(e,t.useContext(ot).motion),p=t.useRef(),v=t.useRef();var m=Wt(h,a,function(){try{return p.current instanceof HTMLElement?p.current:at(v.current)}catch(t){return null}},e),g=L(m,4),y=g[0],x=g[1],w=g[2],b=g[3],C=t.useRef(b);b&&(C.current=!0);var j,k=t.useCallback(function(t){p.current=t,et(r,t)},[r]),E=z(z({},f),{},{visible:a});if(c)if(y===lt)j=b?c(z({},E),k):!s&&C.current&&d?c(z(z({},E),{},{className:d}),k):l||!s&&!d?c(z(z({},E),{},{style:{display:"none"}}),k):null;else{var N;x===ht?N="prepare":Tt(x)?N="active":x===pt&&(N="start");var S=Lt(u,"".concat(y,"-").concat(N));j=c(z(z({},E),{},{className:M(Lt(u,y),q(q({},S,S&&N),u,"string"==typeof u)),style:w}),k)}else j=null;t.isValidElement(j)&&function(t){var e,n;if(!t)return!1;if(rt(t)&&tt>=19)return!0;var r=A.isMemo(t)?t.type.type:t.type;return!!("function"!=typeof r||null!==(e=r.prototype)&&void 0!==e&&e.render||r.$$typeof===A.ForwardRef)&&!!("function"!=typeof t||null!==(n=t.prototype)&&void 0!==n&&n.render||t.$$typeof===A.ForwardRef)}(j)&&(function(t){if(t&&rt(t)){var e=t;return e.props.propertyIsEnumerable("ref")?e.props.ref:e.ref}return null}(j)||(j=t.cloneElement(j,{ref:k})));return t.createElement(st,{ref:v},j)});return r.displayName="CSSMotion",r}(Pt);var Ut="add",Kt="keep",Zt="remove",Ht="removed";function Gt(t){var e;return e=t&&"object"===B(t)&&"key"in t?t:{key:t},z(z({},e),{},{key:String(e.key)})}function Qt(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(Gt)}var Jt=["component","children","onVisibleChanged","onAllRemoved"],te=["status"],ee=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];!function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$t,r=function(e){_(i,e);var r=D(i);function i(){var t;I(this,i);for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return t=r.call.apply(r,[this].concat(n)),q(V(t),"state",{keyEntities:[]}),q(V(t),"removeKey",function(e){t.setState(function(t){return{keyEntities:t.keyEntities.map(function(t){return t.key!==e?t:z(z({},t),{},{status:Ht})})}},function(){0===t.state.keyEntities.filter(function(t){return t.status!==Ht}).length&&t.props.onAllRemoved&&t.props.onAllRemoved()})}),t}return Y(i,[{key:"render",value:function(){var e=this,r=this.state.keyEntities,i=this.props,a=i.component,o=i.children,s=i.onVisibleChanged;i.onAllRemoved;var l=X(i,Jt),c=a||t.Fragment,u={};return ee.forEach(function(t){u[t]=l[t],delete l[t]}),delete l.keys,t.createElement(c,l,r.map(function(r,i){var a=r.status,l=X(r,te),c=a===Ut||a===Kt;return t.createElement(n,T({},u,{key:l.key,visible:c,eventProps:l,onVisibleChanged:function(t){null==s||s(t,{key:l.key}),t||e.removeKey(l.key)}}),function(t,e){return o(z(z({},t),{},{index:i}),e)})}))}}],[{key:"getDerivedStateFromProps",value:function(t,e){var n=t.keys,r=e.keyEntities,i=Qt(n),a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,i=e.length,a=Qt(t),o=Qt(e);a.forEach(function(t){for(var e=!1,a=r;a<i;a+=1){var s=o[a];if(s.key===t.key){r<a&&(n=n.concat(o.slice(r,a).map(function(t){return z(z({},t),{},{status:Ut})})),r=a),n.push(z(z({},s),{},{status:Kt})),r+=1,e=!0;break}}e||n.push(z(z({},t),{},{status:Zt}))}),r<i&&(n=n.concat(o.slice(r).map(function(t){return z(z({},t),{},{status:Ut})})));var s={};return n.forEach(function(t){var e=t.key;s[e]=(s[e]||0)+1}),Object.keys(s).filter(function(t){return s[t]>1}).forEach(function(t){(n=n.filter(function(e){var n=e.key,r=e.status;return n!==t||r!==Zt})).forEach(function(e){e.key===t&&(e.status=Kt)})}),n}(r,i);return{keyEntities:a.filter(function(t){var e=r.find(function(e){var n=e.key;return t.key===n});return!e||e.status!==Ht||t.status!==Zt})}}}]),i}(t.Component);q(r,"defaultProps",{component:"div"})}(Pt);var ne=function(t){return t?{left:t.offsetLeft,right:t.parentElement.clientWidth-t.clientWidth-t.offsetLeft,width:t.clientWidth}:null},re=function(t){return void 0!==t?"".concat(t,"px"):void 0};function ie(e){var n=e.prefixCls,r=e.containerRef,i=e.value,a=e.getValueIndex,o=e.motionName,s=e.onMotionStart,l=e.onMotionEnd,c=e.direction,u=t.useRef(null),d=t.useState(i),f=L(d,2),h=f[0],p=f[1],v=function(t){var e,i=a(t),o=null===(e=r.current)||void 0===e?void 0:e.querySelectorAll(".".concat(n,"-item"))[i];return(null==o?void 0:o.offsetParent)&&o},m=t.useState(null),g=L(m,2),y=g[0],x=g[1],w=t.useState(null),b=L(w,2),C=b[0],j=b[1];H(function(){if(h!==i){var t=v(h),e=v(i),n=ne(t),r=ne(e);p(i),x(n),j(r),t&&e?s():l()}},[i]);var k=t.useMemo(function(){return re("rtl"===c?-(null==y?void 0:y.right):null==y?void 0:y.left)},[c,y]),E=t.useMemo(function(){return re("rtl"===c?-(null==C?void 0:C.right):null==C?void 0:C.left)},[c,C]);return y&&C?t.createElement($t,{visible:!0,motionName:o,motionAppear:!0,onAppearStart:function(){return{transform:"translateX(var(--thumb-start-left))",width:"var(--thumb-start-width)"}},onAppearActive:function(){return{transform:"translateX(var(--thumb-active-left))",width:"var(--thumb-active-width)"}},onVisibleChanged:function(){x(null),j(null),l()}},function(e,r){var i=e.className,a=e.style,o=z(z({},a),{},{"--thumb-start-left":k,"--thumb-start-width":re(null==y?void 0:y.width),"--thumb-active-left":E,"--thumb-active-width":re(null==C?void 0:C.width)}),s={ref:nt(u,r),style:o,className:M("".concat(n,"-thumb"),i)};return t.createElement("div",s)}):null}var ae=["prefixCls","direction","options","disabled","defaultValue","value","onChange","className","motionName"];function oe(t){return t.map(function(t){if("object"===B(t)&&null!==t){var e=function(t){return void 0!==t.title?t.title:"object"!==B(t.label)?null===(e=t.label)||void 0===e?void 0:e.toString():void 0;var e}(t);return z(z({},t),{},{title:e})}return{label:null==t?void 0:t.toString(),title:null==t?void 0:t.toString(),value:t}})}var se=function(e){var n=e.prefixCls,r=e.className,i=e.disabled,a=e.checked,o=e.label,s=e.title,l=e.value,c=e.onChange;return t.createElement("label",{className:M(r,q({},"".concat(n,"-item-disabled"),i))},t.createElement("input",{className:"".concat(n,"-item-input"),type:"radio",disabled:i,checked:a,onChange:function(t){i||c(t,l)}}),t.createElement("div",{className:"".concat(n,"-item-label"),title:s,role:"option","aria-selected":a},o))},le=t.forwardRef(function(e,n){var r,i,a,o,s,l=e.prefixCls,c=void 0===l?"rc-segmented":l,u=e.direction,d=e.options,f=void 0===d?[]:d,h=e.disabled,p=e.defaultValue,v=e.value,m=e.onChange,g=e.className,y=void 0===g?"":g,x=e.motionName,w=void 0===x?"thumb-motion":x,b=X(e,ae),C=t.useRef(null),j=t.useMemo(function(){return nt(C,n)},[C,n]),k=t.useMemo(function(){return oe(f)},[f]),E=function(t,e){var n=e||{},r=n.defaultValue,i=n.value,a=n.onChange,o=n.postState,s=Q(function(){return J(i)?i:J(r)?"function"==typeof r?r():r:"function"==typeof t?t():t}),l=L(s,2),c=l[0],u=l[1],d=void 0!==i?i:c,f=o?o(d):d,h=U(a),p=Q([d]),v=L(p,2),m=v[0],g=v[1];return G(function(){var t=m[0];c!==t&&h(c,t)},[m]),G(function(){J(i)||u(i)},[i]),[f,U(function(t,e){u(t,e),g([d],e)})]}(null===(r=k[0])||void 0===r?void 0:r.value,{value:v,defaultValue:p}),N=L(E,2),S=N[0],P=N[1],R=t.useState(!1),O=L(R,2),A=O[0],F=O[1],_=function(t,e){h||(P(e),null==m||m(e))},D=(a=b,o=["children"],s=Object.assign({},a),Array.isArray(o)&&o.forEach(function(t){delete s[t]}),s);return t.createElement("div",T({role:"listbox","aria-label":"segmented control"},D,{className:M(c,(i={},q(i,"".concat(c,"-rtl"),"rtl"===u),q(i,"".concat(c,"-disabled"),h),i),y),ref:j}),t.createElement("div",{className:"".concat(c,"-group")},t.createElement(ie,{prefixCls:c,value:S,containerRef:C,motionName:"".concat(c,"-").concat(w),direction:u,getValueIndex:function(t){return k.findIndex(function(e){return e.value===t})},onMotionStart:function(){F(!0)},onMotionEnd:function(){F(!1)}}),k.map(function(e){return t.createElement(se,T({},e,{key:e.value,prefixCls:c,className:M(e.className,"".concat(c,"-item"),q({},"".concat(c,"-item-selected"),e.value===S&&!A)),checked:e.value===S,onChange:_,disabled:!!h||!!e.disabled}))})))});const ce="adm-segmented",ue=t.forwardRef((e,n)=>{const{prefixCls:r,className:i,block:a,options:o=[]}=e,s=N(e,["prefixCls","className","block","options"]),l=t.useMemo(()=>o.map(e=>{if(function(t){return"object"==typeof t&&!!(null==t?void 0:t.icon)}(e)){const{icon:n,label:r}=e,i=N(e,["icon","label"]);return Object.assign(Object.assign({},i),{label:t.createElement(t.Fragment,null,t.createElement("span",{className:`${ce}-item-icon`},n),r&&t.createElement("span",null,r))})}return e}),[o,ce]);return S(e,t.createElement(le,Object.assign({},s,{className:M(i,{[`${ce}-block`]:a}),options:l,ref:n,prefixCls:ce})))});function de(t,e){return{x:(e.x-t.x)/2+t.x,y:(e.y-t.y)/2+t.y}}var fe={textBaseline:"middle",fill:"#808080"};function he(t){var e,n,r,i=t.record,a=t.offsetX,c=t.offsetY,u=t.points,d=t.label,f=t.guide,h=i.origin,p=i.color;if(o(d)){var v=4===u.length?de(u[1],u[2]):de(u[0],u[1]);n=s({x:v.x+a,y:v.y+c},fe,d(h,p))}if(o(f)){v=de(4===u.length?de(u[0],u[1]):u[0],de(u[2],null!==(e=u[3])&&void 0!==e?e:u[1]));r=s({x:v.x,y:v.y,textBaseline:"middle",textAlign:"center"},fe,f(h,p))}return l("group",null,n&&l("text",{attrs:n}),r&&l("text",{attrs:r}))}const pe=Object.freeze(Object.defineProperty({__proto__:null,funnel:he,pyramid:he},Symbol.toStringTag,{value:"Module"})),ve=function(t){var e=t.records,n=t.animation,r=t.y0,i=t.clip,a=t.onClick;return l("group",{attrs:{clip:i}},e.map(function(t){var e=t.key,i=t.children;return l("group",{key:e},i.map(function(t){var e=t.key,i=t.xMin,o=t.xMax,s=t.yMin,c=t.yMax,d=t.color,f=t.shape;return isNaN(i)||isNaN(o)||isNaN(s)||isNaN(c)?null:l("rect",{key:e,attrs:R({x:i,y:s,width:o-i,height:c-s,fill:d},f),onClick:a,animation:u({appear:{easing:"linear",duration:450,property:["y","height"],start:{y:r,height:0}},update:{easing:"linear",duration:450,property:["x","y","width","height"]}},n)})}))}))},me=function(t){var e=t.coord,n=t.records,r=t.animation,i=t.onClick,a=e.center,o=e.startAngle,s=e.endAngle,c=e.radius;return l("group",{animation:{appear:R({easing:"quadraticOut",duration:450,clip:{type:"sector",property:["endAngle"],style:{cx:a.x,cy:a.y,startAngle:"".concat(o,"rad"),r:c},start:{endAngle:"".concat(o,"rad")},end:{endAngle:"".concat(s,"rad")}}},r&&r.appear)}},n.map(function(t){var e=t.key,n=t.children;return l("group",{key:e},n.map(function(t){var e=t.key,n=t.xMin,o=t.xMax,s=t.yMin,c=t.yMax,d=t.color,f=t.shape;return l("sector",{key:e,attrs:R({cx:a.x,cy:a.y,fill:d,lineWidth:1,startAngle:"".concat(n,"rad"),endAngle:"".concat(o,"rad"),r0:s,r:c},f),onClick:i,animation:u({update:{easing:"linear",duration:450,property:["x","y","startAngle","endAngle","r0","r"]}},r)})}))}))};function ge(t){var e=t.xMin,n=t.xMax,r=t.yMin,i=t.yMax;return[{x:e,y:r},{x:n,y:r},{x:n,y:i},{x:e,y:i}]}const ye=function(t){var e=t.records,n=t.shape,r=t.showLabel,i=t.labelCfg,a=t.LabelView,o=!1;return l("group",null,e.map(function(t,s){var c=t.key,u=t.children,d=s===e.length-1,f=(d?t:e[s+1]).children,h=ge(f[0]),p=ge(f[f.length-1]);o||(o=f[0].yMax>u[0].yMax),o&&(h.reverse(),p.reverse());var v=u.map(function(t,e){var r=ge(t);return o&&r.reverse(),d?"pyramid"===n&&(r=[de(r[0],r[1]),r[2],r[3]]):(0===e&&(r[0]=h[3]),e===u.length-1&&(r[1]=p[2])),R(R({},t),{points:r})});return l("group",{key:c},v.map(function(t){var e=t.points,n=t.color,o=t.shape;return l("group",null,l("polygon",{attrs:R({points:e.map(function(t){return[t.x,t.y]}),fill:n},o)}),r&&a?l(a,R({record:t,points:e},i)):null)}))}))},xe=Object.freeze(Object.defineProperty({__proto__:null,funnel:ye,pyramid:ye,rect:function(t){var e=t.coord.type;return l("rect"===e?ve:me,R({},t))}},Symbol.toStringTag,{value:"Module"})),we=(be=xe,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return P(e,t),e.prototype.getDefaultCfg=function(){return{geomType:"interval",justifyContent:!0,startOnZero:!0}},e.prototype.getDefaultSize=function(){var t=this,e=t.attrs,n=t.props,r=t.adjust,i=t.records,a=n.coord,o=n.sizeRatio,s=e.x.scale.values;if(o)return 1/s.length*o;var l,c=.5,u=.999999,d=3/4,f=s.length;l=a.isPolar?a.transposed&&f>1?d:u:c;var h=1/s.length*l;return r&&"dodge"===r.type?h/i.length:h},e.prototype.mapping=function(){for(var e,n=t.prototype.mapping.call(this),r=this.props,i=r.coord,a=r.sizeZoom,l=r.chart,u=this.getY0Value(),d=this.getDefaultSize(),f=0,h=n.length;f<h;f++)for(var p=n[f].children,v=0,m=p.length;v<m;v++){var g=p[v],y=g.normalized,x=g.size,w=g.origin;if(c(x)){var b=y.x,C=y.y,j=y.size,k=void 0===j?d:j,E=null!==(e=o(a)?a(w):a)&&void 0!==e?e:1;s(g,i.convertRect({x:b,y:C,y0:u,size:k*E}))}else{var M={size:x,x:b=g.x,y:C=g.y,y0:u};s(g,i.transformToRect(M))}s(g.shape,l.getHighlightStyle(g.origin)),s(g.shape,this.getSelectionStyle(g))}return n},e.prototype.getPointY0=function(){var t=this.props.coord,e=this.getY0Value(),n=t.convertPoint({y:e,x:0});return null==n?void 0:n.y},e.prototype.render=function(){var t=this.props,e=this.state,n=t.coord,r=t.shape,i=void 0===r?"rect":r,a=t.animation,s=t.showLabel,c=t.labelCfg,d=o(be)?be:be[i],f=pe[i],h=u({label:null,offsetX:0,offsetY:0},c);if(!d)return null;var p=e.selected,v=this.mapping(),m=this.getPointY0(),g=this.getClip();return l(d,{coord:n,records:v,selected:p,shape:i,animation:a,showLabel:s,labelCfg:h,LabelView:f,y0:m,clip:g})},e}(d));var be;const Ce=(je=function(t){var e=t.items,n=t.itemWidth,r=t.itemFormatter,i=t.style,a=t.marker,s=void 0===a?"circle":a,c=t.itemStyle,u=t.nameStyle,d=t.valueStyle,f=t.valuePrefix,h=t.onClick,p=t.layoutMode,v=function(t,e){return void 0===e&&(e=": "),"".concat(e).concat(t)};return l("group",{style:R({display:"flex"},i)},e.map(function(t){var e=t.color,i=t.name,a=t.value,m=t.filtered,g=t.tickValue,y=t.highlighted,x=o(r)?r(a,g):a,w=y?{fill:e,fillOpacity:.2,radius:"6px"}:{};return l("group",{className:"legend-item",style:R(R(R(R({},"adaptive"==p?{}:{width:n}),{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",padding:["6px","6px","6px",0]}),y?w:{}),c),"data-item":t,onClick:h},function(t){var e=t.type,n=t.color;return"square"===e?l("rect",{style:{width:"12px",height:"12px",marginRight:"10px"},attrs:{fill:n}}):"line"===e?l("line",{style:{width:"19px",marginRight:"10px"},attrs:{stroke:n,lineCap:"round",lineWidth:"4px"}}):l("circle",{style:{width:"12px",height:"12px",marginRight:"10px",fill:n,fillOpacity:1}})}({color:m?"#bfbfbf":e,type:(null==t?void 0:t.marker)||s}),l("text",{attrs:R({fill:m?"#bfbfbf":"#808080",text:i,fillOpacity:1},u)}),x?l("text",{attrs:R({fill:"#808080",text:v(x,f),fillOpacity:1},d)}):null)}))},function(t){function e(e){var n=t.call(this,e)||this;return n._onclick=function(t){var e,r,i=n.props,a=i.chart,s=i.clickable,l=void 0===s||s,c=i.onClick,u=i.clickMode,d=void 0===u?"filter":u;if(l){var f=t.currentTarget;if(f){var h=f.config["data-item"];if(h){o(c)&&c(h);var p=h.field,v=h.tickValue,m=n.state,g=m.filtered,y=m.highlighted,x=R(R({},g),((e={})[v]=!g[v],e));if("filter"===d)n.setState({filtered:x}),a.filter(p,function(t){return!x[t]});else if("highlight"===d){var w=((r={})[v]=!y[v],r);n.setState({highlighted:w}),a.highlight(p,y[v]?null:function(t){return w[t]})}}}}},n.state={filtered:{},highlighted:{},items:[]},n}return P(e,t),e.prototype.getOriginItems=function(){return this.props.chart.getLegendItems()},e.prototype.getItems=function(){var t,e=this.props,n=this.state,r=n.filtered,i=n.highlighted,a=(null===(t=e.items)||void 0===t?void 0:t.length)?e.items:this.getOriginItems();return a?a.map(function(t){var e=t.tickValue;return R(R({},t),{filtered:r[e],highlighted:i[e]})}):null},e.prototype.setItems=function(t){this.setState({items:t})},e.prototype.getMaxItemBox=function(t){var e=0,n=0;return(t.children||[]).forEach(function(t){var r=t.layout,i=r.width,a=r.height;e=Math.max(e,i),n=Math.max(n,a)}),{width:e,height:n}},e.prototype.getItemBoxes=function(t){return(t.children||[]).map(function(t){var e=t.layout;return{width:e.width,height:e.height}})},e.prototype._init=function(){var t=this.props,e=this.context,n=t.layout,r=t.width,i=t.height,a=t.position,o=void 0===a?"top":a,s=t.layoutMode,l=void 0===s?"uniform":s,c=this.getItems();if(c&&c.length){var u,d,h=n.left,p=n.top,v=n.width,m=n.height,g=e.px2hd(r)||v,y=f(this,this.render()),x=this.getMaxItemBox(y),w=x.width,b=x.height;if("adaptive"===l){var C=0;u=1;for(var j=0,k=this.getItemBoxes(y);j<k.length;j++){var E=k[j].width;C+E>g?(C=E,u++):C+=E}d=void 0}else{var M=Math.max(1,Math.floor(g/w)),N=c.length;u=Math.ceil(N/M),d=g/M}var S=b*u,P={left:h,top:p,width:g,height:void 0,flexDirection:"row",flexWrap:"wrap",alignItems:"center",justifyContent:"flex-start"};1===u&&(P.justifyContent="space-between"),"top"===o&&(P.height=i||S),"left"===o&&(P.flexDirection="column",P.justifyContent="center",P.alignItems="adaptive"===l?"flex-start":"center",P.width=w,P.height=i||m),"right"===o&&(P.flexDirection="column",P.alignItems="flex-start",P.justifyContent="center",P.left=h+(g-w),P.width=w,P.height=i||m),"bottom"===o&&(P.top=p+(m-S),P.height=i||S),this.itemWidth=d,this.legendStyle=P}},e.prototype.updateCoord=function(){var t=this,e=t.context,n=t.props,r=t.legendStyle,i=n.position,a=void 0===i?"top":i,o=n.margin,s=void 0===o?"30px":o,l=n.chart,c=r.width,u=r.height,d=e.px2hd(s);l.updateCoordFor(this,{position:a,width:c+d,height:u+d})},e.prototype.willMount=function(){var t=this.getItems();t&&t.length&&(this._init(),this.updateCoord())},e.prototype.didMount=function(){},e.prototype.willUpdate=function(){var t=this.getItems();t&&t.length&&(this._init(),this.updateCoord())},e.prototype.render=function(){var t=this,e=t.props,n=t.itemWidth,r=t.legendStyle,i=this.getItems();return i&&i.length?l(je,R({},e,{items:i,itemWidth:n,style:R(R({},r),e.style),onClick:this._onclick})):null},e}(h));var je;function ke(t,e){if(t.length!==e.length)return!1;var n=t.length-1;return t[0]===e[0]&&t[n]===e[n]}function Ee(t,e,n){var r=t.isCategory,i=t.isLinear;return r?function(t,e,n){var r=t.values,i=t.ticks,a=t.tickMethod,o=t.tickCount,s=e.values,l=n[0],c=n[1],u=s.length,d=l*u,f=parseFloat((c*u-d).toFixed(3)),h=Math.round(f),p=Math.min(Math.round(d),u-h),v=s.slice(p,p+h),g=Math.round(o*s.length/v.length),y=m(a)({tickCount:g,values:s});if(!ke(r,v)||!ke(i,y))return t.change({values:v,ticks:y}),t}(t,e,n):i?function(t,e,n){var r=e.min,i=e.max,a=r+(i-r)*n[0],o=r+(i-r)*n[1];t.change({min:a,max:o,nice:!1})}(t,e,n):void 0}function Me(t,e,n){var r=e.field,i=e.type,a=e.values,o={};return a.forEach(function(t){o[t]=!0}),t.map(function(t){var e=t.field,a=[];return n.forEach(function(t){var n="timeCat"===i?p(t[r]):t[r];if(o[n]){var s=t[e];v(s)?a.push.apply(a,s):a.push(s)}}),function(t,e){if(t.isLinear){var n=g(e),r=n.min,i=n.max;return t.change({min:r,max:i,nice:!0})}}(t,a)})}function Ne(t,e,n){return(e-t)*n+t}function Se(t,e){if(!e)return!1;for(var n=0,r=t.length;n<r;n++)if(!w(t[n],e[n]))return!1;return!0}function Pe(t,e){if(!e)return!1;if(v(t))return Se(t,e);for(var n in t)if(!Se(t[n],e[n]))return!1;return!0}function Re(t,e){return new t.constructor(R(R({},t.__cfg__),e))}const Oe=function(t,e){var n=t.coord,r=t.range,i=t.position,a=t.layout,o=t.style,s=t.background,c=t.barStyle,u=n.left,d=n.width,f=a.top,h=a.height,p=(null==r?void 0:r.x)||(null==r?void 0:r.y),v=p[0],m=d*v,g=d*(p[1]-v);if(!isNaN(g))return l("group",{style:R({display:"flex",left:u,top:"top"===i?f-e.px2hd("8px"):f+h},o)},l("line",{style:R({display:"flex",position:"absolute",left:0,width:d,height:0,stroke:"rgba(202, 215, 239, .2)",lineCap:"round",lineWidth:"8px"},s)}),l("line",{style:R({display:"flex",position:"absolute",left:m,width:g,height:0,stroke:"rgba(202, 215, 239, .5)",lineCap:"round",lineWidth:"8px"},c)}))},Le=function(t,e){var n=t.coord,r=t.range,i=t.position,a=t.layout,o=t.style,s=t.background,c=t.barStyle,u=n.top,d=n.height,f=a.left,h=a.width,p=(null==r?void 0:r.y)||(null==r?void 0:r.x),v=p[0],m=d*v,g=d*(p[1]-v);return l("group",{style:R({display:"flex",top:u,left:"left"===i?f-e.px2hd("8px"):f+h},o)},l("line",{style:R({position:"absolute",top:0,left:0,width:0,height:d,stroke:"rgba(202, 215, 239, .2)",lineCap:"round",lineWidth:"8px"},s)}),l("line",{style:R({position:"absolute",top:m,width:0,height:g,stroke:"rgba(202, 215, 239, .5)",lineCap:"round",lineWidth:"8px"},c)}))},Ae=function(t){return function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return P(n,e),n.prototype.willMount=function(){e.prototype.willMount.call(this);var t=this.context,n=this.props,r=n.visible,i=n.position,a=void 0===i?"bottom":i,o=n.margin,s=void 0===o?"16px":o,l=n.chart,c=t.px2hd(s);if(!1===r)return null;l.updateCoordFor(this,{position:a,width:"left"===a||"right"===a?c:0,height:"bottom"===a||"top"===a?c:0})},n.prototype.render=function(){var e=this.props,n=this.state;return!1===e.visible?null:l(t,R({position:"bottom"},e,n))},n}(function(t){return function(e){function n(t){var n=this;(n=e.call(this,R(R({},{onPanStart:function(){},onPinchStart:function(){},onPan:function(){},onPinch:function(){},onInit:function(){},onPanEnd:function(){},onPinchEnd:function(){},minCount:10}),t))||this).scale={},n.originScale={},n.swipeEnd={startX:0,startY:0,endX:0,endY:0},n.onPanStart=function(){var t=n.scale,e=n.props.onPanStart;n.onStart(),null==e||e({scale:t})},n.onPan=function(t){var e=n.props.onPan,r=n.dims,i={};x(r,function(e){"x"!==e?"y"!==e||(i.y=n._doYPan(t)):i.x=n._doXPan(t)}),n.renderRange(i),null==e||e(t)},n.onPanEnd=function(){var t=n.scale,e=n.props.onPanEnd;n.onEnd(),null==e||e({scale:t})},n.onPinchStart=function(){var t=n.props.onPinchStart;n.onStart(),null==t||t()},n.onPinch=function(t){var e=n.props.onPinch,r=n.dims,i={};x(r,function(e){"x"!==e?"y"!==e||(i.y=n._doYPinch(t)):i.x=n._doXPinch(t)}),n.renderRange(i),null==e||e(t)},n.onPinchEnd=function(){var t=n.scale,e=n.props.onPinchEnd;n.onEnd(),null==e||e({scale:t})},n.onStart=function(){var t=n.state.range;n.startRange=t,n._cancelAnimationFrame()},n.onSwipe=function(t){var e=n,r=e.props,i=e.state,a=t.velocity,o=t.direction,s=t.velocityX,l=void 0===s?0:s,c=t.velocityY,u=void 0===c?0:c,d=t.points,f=r.mode,h=r.swipe,p=i.range;if(h&&f)if(1!==f.length){var v=d[0],m=v.x,g=v.y;Math.abs((null==p?void 0:p.x[0])-0)<5e-4&&l>0||Math.abs((null==p?void 0:p.x[1])-1)<5e-4&&l<0||Math.abs((null==p?void 0:p.y[0])-0)<5e-4&&u<0||Math.abs((null==p?void 0:p.x[1])-1)<5e-4&&u>0||(n.swipeEnd={startX:m,startY:g,endX:m+50*l,endY:g-50*u},n.onStart(),n.update())}else n.animateSwipe(f,p[f],"right"===o||"down"===o?-a:a)},n.onEnd=function(){n.startRange=null};var r=t.mode;return n.dims=v(r)?r:[r],n}return P(n,e),n.prototype.didMount=function(){var t=this.scale;(0,this.props.onInit)({scale:t}),this._bindEvents()},n.prototype.willReceiveProps=function(t){var e=t.range,n=t.data,r=this.props,i=r.range;if(n!==r.data&&this._cancelAnimationFrame(),!y(e,i)){var a={};x(this.dims,function(t){a[t]=e}),this.state={range:a}}},n.prototype.willMount=function(){var t=this,e=this.props,n=this.dims,r=e.minCount,i=e.range,a=Number.MIN_VALUE,o={};x(n,function(e){var n=t._getScale(e),r=n.values;a=r.length>a?r.length:a,t.scale[e]=n,t.originScale[e]=Re(n),t.updateRange(i,e),o[e]=i}),this.minScale=r/a,this.renderRange(o)},n.prototype.willUpdate=function(){var t=this,e=this,n=e.props,r=e.state,i=e.dims,a=n.minCount,o=n.range,s=Number.MIN_VALUE,l={};if(x(i,function(e){var n=t._getScale(e);if(n!==t.scale[e]){var r=n.values;s=r.length>s?r.length:s,t.scale[e]=n,t.originScale[e]=Re(n),t.state.range[e]=[0,1],t.updateRange(o,e),l[e]=o}}),Object.keys(l).length>0){this.minScale=a/s;var c=R(R({},r.range),l);this.renderRange(c)}},n.prototype.didUnmount=function(){this._cancelAnimationFrame(),this._unBindEvents()},n.prototype._requestAnimationFrame=function(t){var e=this.context.canvas.requestAnimationFrame;return this.loop=e(t),this.loop},n.prototype._cancelAnimationFrame=function(){var t=this.loop,e=this.context;t&&e.canvas.cancelAnimationFrame(t)},n.prototype._bindEvents=function(){var t=this.props,e=t.chart,n=t.pan,r=t.pinch,i=t.swipe;!1!==n&&(e.on("panstart",this.onPanStart),e.on("pan",this.onPan),e.on("panend",this.onPanEnd)),!1!==r&&(e.on("pinch",this.onPinch),e.on("pinchstart",this.onPinchStart),e.on("pinchend",this.onPinchEnd)),!1!==i&&e.on("swipe",this.onSwipe)},n.prototype._unBindEvents=function(){var t=this.props,e=t.chart,n=t.pan,r=t.pinch,i=t.swipe;!1!==n&&(e.off("panstart",this.onPanStart),e.off("pan",this.onPan),e.off("panend",this.onPanEnd)),!1!==r&&(e.off("pinch",this.onPinch),e.off("pinchstart",this.onPinchStart),e.off("pinchend",this.onPinchEnd)),!1!==i&&e.off("swipe",this.onSwipe)},n.prototype.update=function(){var t=this,e=this.swipeEnd,n=e.startX,r=e.startY,i=e.endX,a=e.endY,o=Ne(n,i,.05),s=Ne(r,a,.05);this.swipeEnd={startX:o,startY:s,endX:i,endY:a};var l=this.props.coord,c=l.width,u=l.height,d={};d.x=this._doPan((o-n)/c,"x"),d.y=this._doPan((s-r)/u,"y"),this.renderRange(d),this.startRange=d,this._requestAnimationFrame(function(){return t.update()}),Math.abs(o-i)<5e-4&&Math.abs(s-a)<5e-4&&(this.onEnd(),this._cancelAnimationFrame())},n.prototype.animateSwipe=function(t,e,n){var r=this,i=this.props.swipeDuration,a=void 0===i?1e3:i,o=(e[1]-e[0])*n,s=Date.now(),l=function(n){var i=[e[0]+o*n,e[1]+o*n],a=r.updateRange(i,t);r.renderRange({x:a})},c=function(){var t=Date.now()-s;if(t>=a)l(1);else{var e,n=(e=t/a)*(2-e);l(n),r._requestAnimationFrame(function(){c()})}};c()},n.prototype._doXPan=function(t){var e=t.direction,n=t.deltaX;if(1===this.props.mode.length&&("up"===e||"down"===e))return this.state.range.x;t.preventDefault&&t.preventDefault();var r=this.props,i=r.coord,a=r.panSensitive,o=void 0===a?1:a,s=n/i.width*o;return this._doPan(s,"x")},n.prototype._doYPan=function(t){var e=t.direction,n=t.deltaY;if(1===this.props.mode.length&&("left"===e||"right"===e))return this.state.range.y;t.preventDefault&&t.preventDefault();var r=this.props,i=r.coord,a=r.panSensitive,o=void 0===a?1:a,s=-n/i.height*o;return this._doPan(s,"y")},n.prototype._doPan=function(t,e){var n=this.startRange[e],r=n[0],i=n[1],a=(i-r)*t,o=r-a,s=i-a;return this.updateRange([o,s],e)},n.prototype._doXPinch=function(t){t.preventDefault&&t.preventDefault();var e=t.zoom,n=t.center,r=this.props.coord,i=r.width,a=r.left,o=r.right,s=Math.abs(n.x-a)/i,l=Math.abs(o-n.x)/i;return this._doPinch(s,l,e,"x")},n.prototype._doYPinch=function(t){t.preventDefault&&t.preventDefault();var e=t.zoom,n=t.center,r=this.props.coord,i=r.height,a=r.top,o=r.bottom,s=Math.abs(n.y-a)/i,l=Math.abs(o-n.y)/i;return this._doPinch(s,l,e,"y")},n.prototype._doPinch=function(t,e,n,r){var i=this,a=i.startRange,o=i.minScale,s=i.props.pinchSensitive,l=void 0===s?1:s,c=a[r],u=c[0],d=c[1],f=(d-u)*(n<1?(1/n-1)*l:(1-n)*l),h=f*t,p=f*e,v=Math.max(0,u-h),m=Math.min(1,d+p),g=[v,m];return m-v<o?this.state.range[r]:this.updateRange(g,r)},n.prototype.updateRange=function(t,e){if(t){var n,r=t[0],i=t[1],a=i-r;n=r<0?[0,a]:i>1?[1-a,1]:t;var o=this,s=o.props,l=o.scale,c=o.originScale,u=o.state,d=s.data,f=s.autoFit,h=u.range;if(h&&Pe(n,h[e]))return n;if(Ee(l[e],c[e],n),f){var p=this._getFollowScales(e);this.updateFollow(p,l[e],d)}return n}},n.prototype.updateFollow=function(t,e,n){Me(t,e,n)},n.prototype._getScale=function(t){var e=this.props,n=e.coord,r=e.chart;return"x"===t?n.transposed?r.getYScales()[0]:r.getXScales()[0]:n.transposed?r.getXScales()[0]:r.getYScales()[0]},n.prototype._getFollowScales=function(t){var e=this.props,n=e.coord,r=e.chart;return"x"===t?n.transposed?r.getXScales():r.getYScales():"y"===t?n.transposed?r.getYScales():r.getXScales():void 0},n.prototype.renderRange=function(t){var e=this.state,n=this.props;if(!Pe(t,e.range)){var r=n.chart,i=n.onChange;i&&i({range:t});var a=r.animate;r.setAnimate(!1),e.range=t,r.forceUpdate(function(){r.setAnimate(a)})}},n.prototype.render=function(){return l(t,R({},this.props,this.state))},n}(h)}(t))}(function(t){var e=t.position;return t.mode.length>1?l("group",null,l(Le,R({},t)),l(Oe,R({},t))):l("left"===e||"right"===e?Le:Oe,R({},t))}),Fe=({recordList:e,startMileage:n})=>{const{recordList:o}=r(),{isOptimizeCost:s}=i(),l=e||o,c=t.useMemo(()=>{const t=[...l].sort((t,e)=>new Date(t.date).getTime()-new Date(e.date).getTime()),e=t[t.length-1],r=(null==e?void 0:e.kilometerOfDisplay)??0,i=void 0!==n?Math.max(0,r-n):r;let a=t;s&&"refueling"===(null==e?void 0:e.type)&&(a=t.slice(0,-1));return{...a.reduce((t,e)=>("refueling"===e.type?(t.refuelingCost+=Number(e.cost),t.equalOilCount+=Number(e.oil)):(t.chargingCost+=Number(e.cost),t.equalElecCount+=Number(e.electric)),t),{refuelingCost:0,chargingCost:0,equalOilCount:0,equalElecCount:0}),totalKilometers:i}},[l,s,n]),u=t.useMemo(()=>{if(c.totalKilometers<=0)return 0;return(c.refuelingCost+c.chargingCost)/c.totalKilometers*100},[c]),{refuelingCost:d,chargingCost:f,equalOilCount:h,equalElecCount:p}=c;return a.jsxs("div",{className:"statistics-card",children:[a.jsx("h3",{className:"statistics-title",children:"能源消耗统计"}),a.jsxs("div",{className:"statistics-content",children:[a.jsxs("div",{className:"statistics-item",children:[a.jsxs("span",{className:"label",children:["每百公里平均花费",s&&a.jsx($,{style:{marginLeft:4,color:"#1890ff"},onClick:()=>W.show({content:"已开启优化计算",position:"bottom"})})]}),a.jsxs("span",{className:"value",children:[u.toFixed(2)," 元"]})]}),a.jsxs("div",{className:"statistics-details",children:[a.jsxs("div",{className:"statistics-item",children:[a.jsx("span",{className:"label",children:"补能总量："}),a.jsxs("span",{className:"value",children:[a.jsx("span",{className:"oil",children:h.toFixed(2)})," L +",a.jsx("span",{className:"charge",children:p.toFixed(2)})," kWh"]})]}),a.jsxs("div",{className:"statistics-item",children:[a.jsx("span",{className:"label",children:"等效："}),a.jsxs("div",{className:"value",children:[a.jsx("span",{className:"oil",children:(h+p/3.5).toFixed(2)})," L /",a.jsx("span",{className:"charge",children:(p+3.5*h).toFixed(2)})," kWh"]})]})]}),a.jsxs("div",{className:"statistics-details",children:[a.jsxs("div",{className:"statistics-item",children:[a.jsx("span",{className:"label",children:"总花费："}),a.jsxs("div",{className:"mid-label",children:[a.jsx("span",{className:"oil",children:d.toFixed(2)})," 元 +",a.jsx("span",{className:"charge",children:f.toFixed(2)})," 元"]}),a.jsxs("span",{className:"value",children:[(d+f).toFixed(2),"元"]})]}),a.jsxs("div",{className:"statistics-item",children:[a.jsx("span",{className:"label",children:"总里程"}),a.jsxs("span",{className:"value",children:[c.totalKilometers," km"]})]})]})]})]})},_e=b,De=({recordList:e,width:n})=>{const r=t.useMemo(()=>{const t=[],n=[];return[...e].sort((t,e)=>O(t.date).valueOf()-O(e.date).valueOf()).forEach(e=>{const r=O(e.date).format("YY/MM");if("charging"===e.type){const e=t[t.length-1];e&&r===e.date?e.value+=1:t.push({date:r,name:"充电",value:1})}if("refueling"===e.type){const t=n[n.length-1];t&&r===t.date?t.value+=1:n.push({date:r,name:"加油",value:1})}}),[...t,...n].sort((t,e)=>{const n=t.date.split("/"),r=e.date.split("/"),i=Number(n[0])-Number(r[0]);return 0===i?Number(n[1])-Number(r[1]):i})},[e]),i=t.useMemo(()=>new Set(r.map(t=>t.date)).size,[r]);if(!n||0===r.length)return null;const o=Math.floor(n/30),s=i,l=Math.max(0,1-o/s);return a.jsx("div",{style:{width:"100%",height:"260px"},children:a.jsx(_e,{pixelRatio:window.devicePixelRatio,children:a.jsxs(C,{data:r,children:[a.jsx(j,{field:"date",tickCount:5}),a.jsx(j,{field:"value",tickCount:5}),a.jsx(we,{x:"date",y:"value",color:{field:"name",range:["#2FC25B","#1890FF"]},adjust:{type:"dodge",marginRatio:.1}}),a.jsx(k,{showCrosshairs:!0,showItemMarker:!0,triggerOn:"click"}),a.jsx(Ce,{position:"top"}),a.jsx(Ae,{mode:"x",range:[l,1]})]})})})},Ie=b,Ye=({recordList:e,width:n,startMileage:r})=>{const i=t.useMemo(()=>{const t=[...e].sort((t,e)=>O(t.date).valueOf()-O(e.date).valueOf()).reduce((t,e)=>{const n=O(e.date).format("YY/MM");if(0===t.length)t.push([{date:n,value:e.kilometerOfDisplay}]);else{const r=t[t.length-1];n===r[0].date?r.push({date:n,value:e.kilometerOfDisplay}):t.push([{date:n,value:e.kilometerOfDisplay}])}return t},[]);return t.map((e,n)=>{if(0===n)return{date:e[0].date,value:Number(e[e.length-1].value)-r};{const r=t[n-1],i=r[r.length-1].value;return{date:e[0].date,value:e[e.length-1].value-i}}})},[e,r]);if(!n||0===i.length)return null;const o=Math.floor(n/20),s=i.length,l=Math.max(0,1-o/s);return a.jsx("div",{style:{width:"100%",height:"260px"},children:a.jsx(Ie,{pixelRatio:window.devicePixelRatio,children:a.jsxs(C,{data:i,children:[a.jsx(j,{field:"date",tickCount:5}),a.jsx(j,{field:"value",tickCount:5}),a.jsx(we,{x:"date",y:"value",color:"#5B8FF9",size:20}),a.jsx(k,{showItemMarker:!0,triggerOn:"click"}),a.jsx(Ae,{mode:"x",range:[l,1]})]})})})},ze=b,qe=({recordList:e,width:n,startMileage:r})=>{const{isOptimizeCost:o}=i(),{barData:s,lineData:l}=t.useMemo(()=>{const t=[...e].sort((t,e)=>O(t.date).valueOf()-O(e.date).valueOf());let n=-1;if(o){const e=t[t.length-1];"refueling"===(null==e?void 0:e.type)&&(n=e.id)}const i=t.reduce((t,e)=>{const n=`${O(e.date).year()}-Q${Math.floor(O(e.date).month()/3)+1}`;return t[n]||(t[n]=[]),t[n].push(e),t},{}),a=[];if(Object.keys(i).sort().forEach(e=>{const o=i[e],s=o.reduce((t,e)=>e.id===n?t:t+Number(e.cost),0),l=o[o.length-1],c=t.indexOf(o[0]);let u=0;if(c>0){const e=t[c-1];u=Number(l.kilometerOfDisplay)-Number(e.kilometerOfDisplay)}else u=Number(l.kilometerOfDisplay)-r;u>0&&a.push({quarter:e,mileage:u,totalCost:Number(s.toFixed(2)),avgCost:Number((s/u*100).toFixed(2))})}),0===a.length)return{barData:[],lineData:[]};const s=Math.max(...a.map(t=>t.mileage))||1,l=Math.max(...a.map(t=>t.totalCost))||1,c=[],u=[];return a.forEach(t=>{c.push({quarter:t.quarter,type:"里程",val:t.mileage,normalizedVal:Number((t.mileage/s*100).toFixed(2))},{quarter:t.quarter,type:"总花费",val:t.totalCost,normalizedVal:Number((t.totalCost/l*100).toFixed(2))}),u.push({quarter:t.quarter,costPer100:t.avgCost})}),{barData:c,lineData:u}},[e,r,o]);if(!n||0===s.length)return null;const c=Math.floor(n/40),u=l.length,d=Math.max(0,1-c/u);return a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{width:"100%",height:"260px",marginBottom:"16px"},children:a.jsx(ze,{pixelRatio:window.devicePixelRatio,children:a.jsxs(C,{data:s,scale:{normalizedVal:{min:0,max:100}},children:[a.jsx(j,{field:"quarter",tickCount:5}),a.jsx(we,{x:"quarter",y:"val",color:{field:"type",range:["#5B8FF9","#2FC25B"]},adjust:{type:"dodge",marginRatio:.1}}),a.jsx(k,{showItemMarker:!0,triggerOn:"click"}),a.jsx(Ce,{position:"top"}),a.jsx(Ae,{mode:"x",range:[d,1]})]})})}),a.jsx("div",{style:{width:"100%",height:"130px"},children:a.jsx(ze,{pixelRatio:window.devicePixelRatio,children:a.jsxs(C,{data:l,children:[a.jsx(j,{field:"quarter",tickCount:5}),a.jsx(j,{field:"costPer100",tickCount:3,formatter:t=>`${t}`}),a.jsx(E,{x:"quarter",y:"costPer100",color:"#FACC14",shape:"smooth"}),a.jsx(k,{showItemMarker:!0,onChange:t=>{const{items:e}=t;e&&e.forEach(t=>{t.name="均耗",t.value=`${t.origin.costPer100} 元/百公里`})}}),a.jsx(Ae,{mode:"x",range:[d,1]})]})})})]})},Ve=b,Xe=({recordList:e,width:n})=>{const r=t.useMemo(()=>{const t=[];return[...e].filter(t=>"charging"===t.type).sort((t,e)=>O(t.date).valueOf()-O(e.date).valueOf()).forEach(e=>{const n=O(e.date).format("YYYY-MM-DD HH:mm:ss"),r=Number((e.cost/e.electric).toFixed(2));t.push({date:n,value:Number(e.cost),type:"费用"},{date:n,value:r,type:"单价"},{date:n,value:e.electric,type:"电量"})}),t},[e]),i=t.useMemo(()=>new Set(r.map(t=>t.date)).size,[r]);if(!n||0===r.length)return null;const o=Math.floor(n/30),s=i,l=Math.max(0,1-o/s);return a.jsx("div",{style:{width:"100%",height:"260px"},children:a.jsx(Ve,{pixelRatio:window.devicePixelRatio,children:a.jsxs(C,{data:r,scale:{date:{nice:!1}},children:[a.jsx(j,{field:"date",tickCount:5,formatter:t=>O(t).format("MM/DD")}),a.jsx(j,{field:"value",tickCount:5,position:"left"}),a.jsx(E,{x:"date",y:"value",color:{field:"type",range:["#1890FF","#2FC25B","#FACC14"]},shape:"smooth"}),a.jsx(k,{showCrosshairs:!0,showItemMarker:!0,triggerOn:"click"}),a.jsx(Ce,{position:"top",align:"center"}),a.jsx(Ae,{mode:"x",range:[l,1]})]})})})},Te=({recordList:e,width:n,startMileage:r})=>{const{isOptimizeCost:o}=i(),s=t.useMemo(()=>{const t=[];let n=0;const i=[...e].sort((t,e)=>t.kilometerOfDisplay-e.kilometerOfDisplay);let a=-1;if(o){const t=[...e].sort((t,e)=>new Date(t.date).getTime()-new Date(e.date).getTime()),n=t[t.length-1];"refueling"===(null==n?void 0:n.type)&&(a=n.id)}return i.forEach(({kilometerOfDisplay:e,cost:i,id:o})=>{o!==a&&(n+=Number(i));const s=e-r;if(s>=100*t.length){const e=Number((n/s*100).toFixed(2)),r=Math.floor((s-100*t.length)/100);for(let n=0;n<r;n++)t.push({range:100*t.length,value:e})}}),t.filter(t=>t.value<100)},[e,r,o]);if(!n||0===s.length)return null;const l=Math.floor(n/30),c=s.length,u=Math.max(0,1-l/c);return a.jsx("div",{style:{width:"100%",height:"260px"},children:a.jsx(Ve,{pixelRatio:window.devicePixelRatio,children:a.jsxs(C,{data:s,scale:{range:{nice:!1}},children:[a.jsx(j,{field:"range",tickCount:5}),a.jsx(j,{field:"value",tickCount:5}),a.jsx(E,{x:"range",y:"value",shape:"smooth",color:"#1890FF"}),a.jsx(k,{showCrosshairs:!0,showItemMarker:!0,triggerOn:"click"}),a.jsx(Ae,{mode:"x",range:[u,1]})]})})})},Be=()=>{const{recordList:e}=r(),{isOptimizeCost:n}=i(),o=t.useRef(null),[s,l]=t.useState(0),[c,u]=t.useState("all"),d=t.useMemo(()=>{if("all"===c)return e;const t=O().year();return e.filter(e=>O(e.date).year()===t)},[e,c]),f=t.useMemo(()=>{if(0===e.length)return 0;const t=[...e].sort((t,e)=>O(t.date).valueOf()-O(e.date).valueOf());if("all"===c)return t[0].kilometerOfDisplay;{const e=O().year(),n=t.filter(t=>O(t.date).year()<e);return n.length>0?n[n.length-1].kilometerOfDisplay:0}},[e,c]);return t.useEffect(()=>{const t=()=>{if(o.current){const t=o.current.getBoundingClientRect();l(t.width)}};return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[]),a.jsxs("div",{className:"chart-page",children:[a.jsx("div",{className:"chart-filter-container",children:a.jsx(ue,{options:[{label:"全部",value:"all"},{label:"当年",value:"current"}],value:c,onChange:t=>u(t),block:!0})}),a.jsx(Fe,{recordList:d,startMileage:f}),a.jsxs("div",{className:"content",ref:o,style:{padding:"0 16px 16px"},children:[a.jsx("div",{className:"chart-container",children:a.jsx(Xe,{recordList:d,width:s})}),a.jsx("p",{className:"chart-legend",children:"充电记录"}),a.jsx("div",{className:"chart-container",children:a.jsx(Te,{recordList:d,width:s,startMileage:f})}),a.jsxs("p",{className:"chart-legend",children:["每百公里平均费用",n&&a.jsx($,{style:{marginLeft:4,color:"#1890ff",verticalAlign:"middle",cursor:"pointer"},onClick:()=>W.show({content:"已开启优化计算",position:"bottom"})})]}),a.jsx("div",{className:"chart-container",children:a.jsx(De,{recordList:d,width:s})}),a.jsx("p",{className:"chart-legend",children:"充电加油记录"}),a.jsx("div",{className:"chart-container",children:a.jsx(Ye,{recordList:d,width:s,startMileage:f})}),a.jsx("p",{className:"chart-legend",children:"每月行驶里程"}),a.jsx("div",{className:"chart-container",children:a.jsx(qe,{recordList:d,width:s,startMileage:f})}),a.jsxs("p",{className:"chart-legend",children:["每季度均耗 (元/百公里)",n&&a.jsx($,{style:{marginLeft:4,color:"#1890ff",verticalAlign:"middle",cursor:"pointer"},onClick:()=>W.show({content:"已开启优化计算",position:"bottom"})})]})]})]})};export{Be as default};
